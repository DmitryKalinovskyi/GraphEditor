<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:GraphApplication.CustomControls">


    <Style TargetType="{x:Type controls:GraphArrow}">
        <Setter Property="Foreground" Value="Black"/>


        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:GraphArrow}">
                    <Canvas>
                        
                    <!--<Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">-->

                        <Line Stroke="{TemplateBinding Foreground}"
                              Opacity="{TemplateBinding Opacity}"
                              FocusVisualStyle="{x:Null}"
                              StrokeThickness="{TemplateBinding StrokeThickness}"
    X1="{TemplateBinding StartX}"
        Y1="{TemplateBinding StartY}"
        X2="{TemplateBinding EndX}"
        Y2="{TemplateBinding EndY}"
                              
        >
    <!--Style="{StaticResource Edge}"-->
                        </Line>
                            <!--Style="{StaticResource Edge}">-->

                        <!--<Path Stretch="Fill" Fill="Black"
                              Canvas.Top="{TemplateBinding EndY}"
                              Canvas.Left="{TemplateBinding EndX}"
          Data="M 0,110 70,110 45,90 75,90 120,120 75,150 45,150 70,130 0,130 Z"
            Width="30" Height="24"
                              >
                            <Path.RenderTransform>
                                <RotateTransform Angle="180" />
                                --><!--<TranslateTransform X="{TemplateBinding EndX}"
                                                    Y="{TemplateBinding EndY}"/>--><!--
                            </Path.RenderTransform>
                        </Path>-->
                        <!--<controls:EditableTextBox Width="100"
                                                  Canvas.Left="{TemplateBinding CenterX}"
                                                  Canvas.Right="{TemplateBinding CenterY}"
                                                  HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"/>-->
                        <controls:EditableTextBlock Text="{Binding Path=Caption, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                                    Canvas.Left="{TemplateBinding CenterX}"
                                                    Canvas.Top="{TemplateBinding CenterY}">

                        </controls:EditableTextBlock>


                        <!--<TextBlock Text="{TemplateBinding Caption}"
                               Canvas.Left="{TemplateBinding CenterX}"
                               Canvas.Top="{TemplateBinding CenterY}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>-->
                        
                    </Canvas>
                    <!--</Border>-->
                    <ControlTemplate.Triggers>
                        <DataTrigger Binding="{Binding IsMarked}" Value="True">
                            <Setter Property="Foreground" Value="Red"/>
                            <Setter Property="StrokeThickness" Value="{Binding ActiveStrokeThickness, RelativeSource={RelativeSource Self}}"/>
                            <Setter Property="Opacity" Value="{Binding ActiveOpacity, RelativeSource={RelativeSource Self}}"/>
                        </DataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding Start.IsActive}" Value="True"></Condition>
                                <Condition Binding="{Binding End.IsActive}" Value="True"></Condition>
                            </MultiDataTrigger.Conditions>

                            <Setter Property="StrokeThickness" Value="{Binding DefaultStrokeThickness, RelativeSource={RelativeSource Self}}"/>
                            <Setter Property="Opacity" Value="{Binding DefaultOpacity, RelativeSource={RelativeSource Self}}"/>
                        </MultiDataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!--<Style x:Key="Edge"
       TargetType="{x:Type Line}">
    <Setter Property="StrokeThickness" Value="4"/>
    <Setter Property="Stroke" Value="Black"/>
    <Setter Property="Opacity" Value="0.5"></Setter>
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Style.Triggers>
        <DataTrigger Binding="{Binding IsMarked}" Value="True">
            <Setter Property="Stroke" Value="Red"></Setter>
        </DataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding Start.IsActive}" Value="True"></Condition>
                <Condition Binding="{Binding End.IsActive}" Value="True"></Condition>
            </MultiDataTrigger.Conditions>
            
            <Setter Property="Opacity" Value="0.8"></Setter>
        </MultiDataTrigger>
    </Style.Triggers>
</Style>-->
    <Style TargetType="{x:Type controls:EditableTextBlock}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:EditableTextBlock}">
                    <Grid>
                        <!--<TextBlock Text="{TemplateBinding Text}" />-->
                        <TextBox Text="{Binding Path=Text, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
